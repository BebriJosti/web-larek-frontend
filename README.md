# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитиктура приложения MVP (Model-View-Presenter)
- Model: представляет данные приложения и бизнес-логику. Она содержит всю необходимую информацию для 
работы приложения и обеспечивает доступ к данным через интерфейсы или методы.
- View: отображает интерфейс пользователя и передает события от пользователя 
(такие как нажатия кнопок, ввод текста и т.п.) презентеру.
- Presenter: является посредником между моделью и представлением. Он получает данные от модели, 
обрабатывает их и передает представление. Когда пользователь взаимодействует с представлением,
оно отправляет событие презентеру, который решает, какие изменения нужно внести в модель и представление.

## Api
Класс Api нужен для работы с запросами к серверу

- handleResponse: обрабатывает ответ от сервера, в случае успеха возрващает данные
- get: выполняет GET запрос, затем обрабатывает ответ через handleresponse
- post: выполняет POST запрос, затем обрабатывается ответ через handleresponse

## EventEmitter
Брокер сообщений, устанавливает, вызывает и снимает слушатели событий. Предствляет собой Presenter, обеспечивая
связь между моделями данных и пользовательским интерфейсом, синхронизацию данных и визуализацию при 
возникновении определенных событий, координируя взаимодействие между ними.

Паттерн Observer позволяет создать зависимость между объектами-наблюдателями и одним объектом-источником.
При изменении состояния источника все наблюдатели автоматически об этом оповещаются.

Такой подход удобен, когда разные части системы должны оставаться независимыми друг от друга, 
но при этом должны обмениваться информацией.

- on: добавляет новый обработчик к указанному событию. Если для этого события еще нет подписчиков, создается новая коллекция
- off: удаляет указанный обработчик из списка подписчиков конкретного события. Если после удаления обработчиков список 
становится пустым, удаляется вся запись о событии
- emit: инициирует событие, вызывая всех подписчиков, связанных с этим событием
- onAll: подписывается на все события через глобальный обработчик
- offAll: полностью очищает все зарегистрированные обработчики
- trigger: возвращает функцию, которая инициирует указанное событие при своем вызове.

# Model:

## ApiModel 
взаимодействует с сервером, передаёт и получает данные

- getProductList: отвечает за  получение массива карточек с сервера
- postOrder получение ответа по заказу с сервера

## Basket
Сохраняет и взаимодействует с данными от пользователя 

- addProductToBasket: добавляет товар в корзину
- removeProductToBasket: удаляет товар из корзины
- clearBasket: очищает корзину
- basketCounter: считает количество товара в корзине
- totalPriceProducts: считает общую стоимость товара корзине

## CardsModel
получает и сохраняет данные продукта с сервера

- setPreview: получает данные карточки на которую кликнул пользователь
- 
## PayForm
Хранит данные пользователя 

- validateOrder: валидация адреса и выбора оплаты
- validateContactInfo: валидация контактной информации 
- setAddress(: устанавливает адресс пользователя
- setContact: устанавливает контактные данные пользователя 
- getPurchasedOrder: возвращает объект данных пользователя с выбранными товарами

# View

## Cards
отвечает за отображение карточек пользователю 

- displayCard: возвращает карточку 
- setText: возвращает текстовое содержимое элементу
- setPrice: возвращает цену продукта

## Basket
отвечает за отображение корзины пользователю

- displayBasket: возвращает корзину
- displayBasketCount: устанавливает количество товаров в корзине 
- displayBasketSum: устанавливает сумму стоимостей всех товаров в корзине

## Order
отвечает за отображение окна заказа

- displayOrder: возвращает окно заказа
- paymentChoice: выделяет кнопку выбора оплаты

## ContactInfo
отвечает за отображение окна контактной информации пользователя

- displayContact: возвращает окно контактной информации

## Success
отвечает за отображение окна успешного заказа

- displaySuccess: возвращает успешный ответ и количество списанной валюты

## Modal
отвечает за отображение модальных окон

- open: открывает 
- close: закрывает 